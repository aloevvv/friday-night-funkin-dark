<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">  
<title>FNF: Dark Minds</title>
<link rel="icon" type="image/png" href="favicon.png" />
<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
        font-family: sans-serif;
    }

    #loading-screen {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 1s ease;
}

#title-screen {
    position: absolute;
    inset: 0;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transition: opacity 1s ease;
}


    #loading-text {
        color: white;
        font-size: 32px;
        margin-bottom: 20px;
        text-shadow: 0 0 10px black;
    }

    #progress-container {
        width: 60%;
        height: 20px;
        background: rgba(255,255,255,0.2);
        border-radius: 10px;
        overflow: hidden;
    }

    #progress-bar {
        width: 0%;
        height: 100%;
        background: white;
        transition: width 0.2s linear;
    }
    
    .flash {
    animation: flashAnim 2.5s infinite ease-in-out;
}

@keyframes flashAnim {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}


    #disclaimer-screen {
    position: absolute;
    inset: 0;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
    text-align: center;
    padding: 20px;
    color: white;
}

#disclaimer-text {
    position: absolute;
    font-size: 24px;
    max-width: 800px;
    top: 80%;
    margin-bottom: 20px;
}

#press-enter {
    font-size: 18px;
    opacity: 0.8;
}

    #title-screen {
        opacity: 0;
        pointer-events: none;
    }
</style>
</head>
<body>

<div id="loading-screen" style="background-image: url('backgrounds/loading.png');">
    <div id="loading-text">LOADING...</div>
    <div id="progress-container">
        <div id="progress-bar"></div>
    </div>
</div>

<div id="disclaimer-screen" style="background-image: url('backgrounds/disclaimer.png');">
    <div id="disclaimer-text"></div>
    <div id="press-enter">Press ENTER to continue</div>
</div>


<div id="title-screen" style="background-image: url('backgrounds/title.png');"></div>

<script>

    const assets = [
        "backgrounds/title.png",
        "backgrounds/loading.png",
        "backgrounds/disclaimer.png"
    ];

    let loaded = 0;

    function preloadAsset(src) {
        return new Promise((resolve) => {
            let element;

            if (src.endsWith(".png") || src.endsWith(".jpg")) {
                element = new Image();
                element.onload = resolve;
                element.src = src;
            } else {
                element = new Audio();
                element.oncanplaythrough = resolve;
                element.src = src;
                element.load();
            }
        });
    }

    async function preloadAll() {
    for (const src of assets) {
        await preloadAsset(src);
        loaded++;

        const percent = Math.floor((loaded / assets.length) * 100);
        document.getElementById("progress-bar").style.width = percent + "%";
    }

    document.getElementById("loading-text").textContent = "LOADED!";
    await new Promise(r => setTimeout(r, 1000));

    document.getElementById("loading-screen").style.opacity = 0;

    setTimeout(() => {
        const d = document.getElementById("disclaimer-screen");
        d.style.opacity = 1;
        d.style.pointerEvents = "auto";
        disclaimerActive = true;
    }, 1000);
}

const disclaimerText = `
This game contains content that may not be suitable for everyone.
Such topics include emotional abuse and toxic relationships.
It is an AU, so characters may act out of character.
With that, enjoy at your risk.
`;

document.getElementById("disclaimer-text").textContent = disclaimerText;
document.getElementById("disclaimer-text").classList.add("flash");

let disclaimerActive = false;

async function showDisclaimer() {
    const d = document.getElementById("disclaimer-screen");
    d.style.opacity = 1;
    d.style.pointerEvents = "auto";
    disclaimerActive = true;
}
    
    document.addEventListener("keydown", (e) => {
    if (e.key === "Enter" && disclaimerActive) {
        disclaimerActive = false;

        const d = document.getElementById("disclaimer-screen");
        d.style.opacity = 0;
        d.style.pointerEvents = "none";
        
        setTimeout(() => {
            document.getElementById("title-screen").style.opacity = 1;
        }, 1000);
    }
});

    preloadAll();
    
    // below i will yoink things from my previous game

    let gameFlags = {
        placeholder: false,
        place: false
    };
    
</script>

</body>
</html>
